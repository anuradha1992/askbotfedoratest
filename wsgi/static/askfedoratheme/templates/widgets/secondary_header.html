<!-- template secondary_header.html -->
<div id="secondaryHeader">
    <!--<div class="content-wrapper">-->
    <div id="secondary-header-container">
        {# form is wrapping search buttons and the search bar inputs #}
        {% set enabled_scopes_class = 'scopes-' + 
            '%s'|format(settings.ALL_SCOPE_ENABLED) + '-' +
            '%s'|format(settings.UNANSWERED_SCOPE_ENABLED) + '-' +
            '%s'|format((request.user.is_authenticated() and settings.FOLLOWED_SCOPE_ENABLED))
        %}
        <form
            {% if active_tab == "tags" %}
                action="{% url tags %}" 
            {% elif page_class == 'user-profile-page' %}
                action="{% url questions %}" id="searchForm"
            {% elif active_tab == "users" %}
                action="" 
            {% else %}
                action="{% url questions %}" id="searchForm"
            {% endif %}
            class="{{ enabled_scopes_class }}"
            method="get">
            {# 
                A single row table to help the semi-fixed width layout where:
                * all cells have "tight width" without linebreaks
                * except that the search bar cell takes the remaining width
                We had hard time making this layout work without tables.
                Please suggest if there is a better way.
            #}
            
                    <div id="desktop-hamburger-container">
                        <div class="desktop-hamburger">
                            <div id="cssmenu">
                                <ul>
                                    <li class="active has-sub last">
                                        <a href="#">
                                            <span>
                                                <div id="image-div">
                                                    <i class="fa fa-bars fa-2x desktop-hamburger-icon"></i>
                                                </div>
                                            </span>
                                        </a>
                                        <ul>
                                            {% if need_scope_links %}
                                                {% if active_tab != "ask" %}
                                                    {% if not search_state %}  {#  get empty SearchState() if there's none #}
                                                        {% set search_state=search_state|get_empty_search_state %}
                                                    {% endif %}
                                                    {% if settings.ALL_SCOPE_ENABLED %}
                                                    <li>
                                                        <!--<a class="scope-selector {% if scope == 'all' %}on{% endif %}"
                                                        href="{{ search_state.change_scope('all').full_url() }}">-->
                                                        <a href="{{ search_state.change_scope('all').full_url() }}">
                                                            <span>{% trans %}ALL{% endtrans %}</span>
                                                        </a>
                                                    </li>
                                                    {% endif %}
                                                    {% if settings.UNANSWERED_SCOPE_ENABLED %}
                                                    <li>
                                                        <!--<a class="scope-selector {% if scope == 'unanswered' %}on{% endif %}"
                                                        href="{{ search_state.change_scope('unanswered').change_sort('answers-asc').full_url() }}">-->
                                                        <a href="{{ search_state.change_scope('unanswered').change_sort('answers-asc').full_url() }}">
                                                            <span>{{ settings.WORDS_UNANSWERED|escape }}</span>
                                                        </a>
                                                    </li>
                                                    {% endif %}
                                                    {% if request.user.is_authenticated() and settings.FOLLOWED_SCOPE_ENABLED %} 
                                                    <li>
                                                        <!--<a class="scope-selector {% if scope == 'followed' %}on{% endif %}"
                                                        href="{{ search_state.change_scope('followed').full_url() }}">-->
                                                        <a href="{{ search_state.change_scope('followed').full_url() }}">
                                                            <span>{% trans %}FOLLOWED{% endtrans %}</span>
                                                        </a>
                                                    </li>
                                                    {% endif %}
                                                {% else %}
                                                    <div class="scope-selector ask-message">{{ settings.WORDS_PLEASE_ASK_YOUR_QUESTION_HERE|escape }}</div>
                                                {% endif %}
                                            {% endif %}
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div id="search-bar-container">
                        {% include "widgets/search_bar.html" %}
                    </div>
                    {% if settings.ASK_BUTTON_ENABLED %}
                    <div id="ask-btn-container">
                        {% include "widgets/ask_button.html" %}   
                    </div>    
                    {% endif %}
        </form>
    </div>
    <!--</div>-->
</div>
